<head>
	<title>pest homework</title>
	<script LANGUAGE="JavaScript"><!-- hide from uneducated browsers

    var thePest

    function VirtualPest(state,petaction,petsound,counter,food) 
    {
    // ---------------------------------------------------------------------------
    // This 'function' is actually a constructor for a Virtual Pest.  The Pest 
    // should have properties 'state' and 'counter', and also properties for 
    // each of the places where values are shown in the display form. 
    // ---------------------------------------------------------------------------
    	this.state = state;
    	this.petaction = petaction;
    	this.petsound = petsound;
    	this.counter = counter;
        this.food = food;
    }

    function Init() 
    {
        alert("Init called")
    // ---------------------------------------------------------------------------
    // This function is called when the page is loaded initially.  
    // It does the following:
    //   Calls the pest constructor (VirtualPest) with initial values,
    //     including the value of the form's "state" element, 
    //   Calls ShowState in order to initialize the display
    //   Sets the simulation in motion by preparing a call
    //     to Simulate after 1000 msec (= 1 second).
    // ---------------------------------------------------------------------------	
    // To Do: preload images for pet pictures.
    // ---------------------------------------------------------------------------

    // ---------------------------------------------------------------------------
    //	  Create a new virtual pest (thePest) by providing 
    //	    - initial state ("happy")
    //	    - initial value for the petaction display box ("" - the empty string)	  
    //	    - initial value for the petsound display box ("" - the empty string)	  
    //	    - initial value for the counter - the number of times Simulate is called (0).

          thePest = new VirtualPest("happy","Stares at you","purr purr hello",0,5)

          ShowState(thePest)
          setTimeout("Simulate(thePest)",1000)
    }

    function ShowState(pest) 
    {
        alert("ShowState Called")
    // ---------------------------------------------------------------------------
    // This function updates the form in order to 
    // make visible the effects of the pest's state.
    // No changes are made to the pest's state by
    // this function
    // ---------------------------------------------------------------------------

    // ---------------------------------------------------------------------------
    // The pest's state is retrieved from the "state"
    // element of the form
    // ---------------------------------------------------------------------------
    	   var state = pest.state ;
           var picture = document.getElementById("picture");
    // ---------------------------------------------------------------------------
    // The value of the state is examined and form
    // elements are updated as appropriate.
    // ---------------------------------------------------------------------------
    // To Do: have pet's picture updated as well
    // ---------------------------------------------------------------------------
    	  if( state == "happy" ) 
    	  {
              alert("Happy state recognized");
                   document.getElementById("picture").src="Done.png";
    		   pest.petaction = "stares at you";
    		   pest.petsound = "purr purr hello";
                   
    	  }
    	  else if( state == "excited" ) 
    	  {
              document.getElementBrId("picture").src="Happy.png";
    		  pest.petaction = "High-fives himself"
    		  pest.petsound = "I'm having a good time"
    	  }
    	  else if( state == "angry" ) 
    	  {
              document.getElementBrId("picture").src="Scarred.png";
    		  pest.petsound = "Who are you"
    		  pest.petaction = "Doesn't acknowledge your existence"
    	  }
    	  else if( state == "lonely" ) 
    	  {  
              document.getElementBrId("picture").src="Sad.png";
    		  pest.petsound = "Love me"
    		  pest.petaction = "stares at you longingly from a distance"
    	  }
    	  else if(state == "exhausted" && pest.food<10)
    	  {
              document.getElementBrId("picture").src="Dissapoint.png";
    		  pest.petaction = "Lays down and watches Food Network"
    		  pest.petsound = "Lets not do anything"
    	  }
          else if(state == "exhausted" && pest.food>10){
              document.getElementBrId("picture").src="Dissapoint.png";
                pest.petaction = "Lays down and watches Cartoon Network"
                pest.petsound = "I am full of pizza"
          }
    	  
    	  document.getElementById("state").value = pest.state;
    	  document.getElementById("petaction").value = pest.petaction;
    	  document.getElementById("petsound").value = pest.petsound;
    	  document.getElementById("counter").value = pest.counter;
          document.getElementBrId("food").value = pest.food;
    }
    
    function Pat(pest) 
    {
    // ---------------------------------------------------------------------------
    // This function is called when the "Pat Dog" 
    // button is clicked.  This button only has an
    // effect if the pest is in the "angry" or "lonely"
    // state.  Otherwise, nothing is changed.
    // ---------------------------------------------------------------------------

    // ---------------------------------------------------------------------------
    // The pest's state is retrieved from the "state"
    // element of the form
    // ---------------------------------------------------------------------------
          var state = pest.state

    // ---------------------------------------------------------------------------
    // The pest's state is changed as appropriate:
    // ---------------------------------------------------------------------------
    	  if( state == "angry" )
    		  pest.state = "provoked"
    	  else if( state == "lonely" )
    		  pest.state = "happy"

    // ---------------------------------------------------------------------------
    // The display is updated to reflect the pest's state
    // ---------------------------------------------------------------------------
    		 ShowState(pest)
    }
    
    function feed(pest){
        
        var state = pest.state;
        
        if(state == "angry"){
            pest.state = "happy";
        } else if(state == "happy"){
            pest.state = "excited";
        } else if(state == "lonely"){
            pest.state = "happy";
        } else if(state == "exhausted"){
            pest.state = "happy";
        } else if(state == "excited" && pest.food<10){
            pest.food += 1;
            pest.state = "happy";
        } else if(state == "excited" && pest.food>10){
            pest.food +=1;
            pest.state = "exhausted"
        }
        
        
        
    }
    
    function Simulate(pest) 
    {
    // ---------------------------------------------------------------------------
    // This function is the heart of a simulation
    // of state transitions reflected in a finite-state
    // machine.
    // ---------------------------------------------------------------------------

    	  pest.counter++  // updates the Simulate counter.
      
    // ---------------------------------------------------------------------------
    // The pest's state is retrieved from the "state"
    // element of the form
    // ---------------------------------------------------------------------------
    	  var state = pest.state

    // ---------------------------------------------------------------------------
    // A random number in the interval (0,1) is generated.
    // ---------------------------------------------------------------------------
    	  var n = Math.random()

    // ---------------------------------------------------------------------------
    // The state changes according to the following rules:
    //
    // If the current state is "provoked", the pest has a 20%
    // chance of becoming "lonely" and an 80% chance of remaining
    // "provoked".
    // If the current state is "happy", the pest has a 10%
    // chance of becoming "angry" and a 90% chance of remaining
    // "happy".
    // ---------------------------------------------------------------------------

    	  if( state == "provoked" && n < 0.2 ) 
    		  pest.state = "lonely"
    	  else if( state == "happy" && n < 0.1 )
    		  pest.state = "angry"

    // ---------------------------------------------------------------------------
    // The display is updated to reflect the pest's state
    // ---------------------------------------------------------------------------
    		 ShowState(pest)

    // ---------------------------------------------------------------------------
    // The Simulate function is set to run again after a delay
    // ---------------------------------------------------------------------------
    		setTimeout("Simulate(thePest)",1000)
    }
    
	// --------------------------------------------------------------------------- 
	// from http://www.willmaster.com/blog/css/show-hide-floating-div.php
	// By Will Bontrager 
	// ---------------------------------------------------------------------------
	function reverseDisplay(d) 
	{
		if(document.getElementById(d).style.display == "none") 
		{ 
			document.getElementById(d).style.display = "block"; 
		}
		else 
		{ 
			document.getElementById(d).style.display = "none"; 
		}
    }

// end hiding from uneducated browsers  --></script>
</head>
<body onLoad="Init()">
    
<table WIDTH="90%" BORDER="1" CELLPADDING="6" CELLSPACING="0" BGCOLOR="#EDE4BA" SUMMARY="Sample look and feel for first part of Virtual Pest assignment.">
      <tr>
        <td>
          <h2><font COLOR="#24486C" FACE="Georgia, Times New Roman, Times, serif">Pizza Steve, the Coolest Cat</font></h2>
          <table WIDTH="100%" BORDER="1" CELLPADDING="4" CELLSPACING="0">
            <tr>
              <td BGCOLOR="#C9C9C9">
                <div ALIGN="CENTER"><img ID="picture" SRC="Done.png" ALT="PizzaSteve" WIDTH=133 HEIGHT=125 align=middle /></div>
              </td>
            </tr>
          </table>
          <p ALIGN="center"> </p>
           
          <form ACTION="" METHOD=POST>
            
            <p ALIGN="center"><b><font FACE="Georgia, Times New Roman, Times, serif">Pet Sound:</font></b>
              <input TYPE=text NAME=PetSound VALUE="" SIZE=35 />
            </p>
            <p ALIGN="center"><b><font FACE="Georgia, Times New Roman, Times, serif">Pet Action:</font></b>
              <input TYPE=text NAME=PetAction VALUE="" SIZE=35 />
            </p>
            <p ALIGN="center"><b><font FACE="Georgia, Times New Roman, Times, serif">Belly Fullness:</font></b>
                <input Type="text" Name="food" value="" size="35"/>
            <p ALIGN="center">
              <input TYPE=button NAME=OwnerHand VALUE="Pet Pizza Steve" onclick="Pat(thePest)"/>
              <input TYPE=button NAME=GivePizza VALUE="Give Pizza Steve pizza" onclick="feed(thePest)" />
                Step counter:
          <input type="text" name="counter" id="counter" VALUE="" size="30" />
            </p>
          </form>
        </td>
      </tr>
    </table>
	</body>